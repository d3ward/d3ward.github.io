<!DOCTYPE html>
<html>

<head>
  <title>Github Stats</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="src/svg/d3.png">
  <link rel="stylesheet" href="src/main.css">
  <style>
    .p_title {
      margin: 25px;
      text-align: center;
    }

    .release {
      background-color: rgba(127, 140, 141, 0.1);
      border: solid 1px rgba(127, 140, 141, 0.4);
      padding: 20px;
      border-radius: 5px;
      margin-bottom: 10px;
    }

    .release h3 .badge {
      cursor: default;
      background-color: var(--primary);
      color: #252829;
      padding: 5px;
    }

    .lat_r,
    .lat_r hr {
      background-color: rgba(92, 184, 92, 0.2);
      border-color: rgba(92, 184, 92, 0.4);
    }

    .lat_r h3,
    .lat_r h3 a {
      color: var(--green);
    }

    .lat_r h3 .badge {
      border-radius: var(--radius);
      background-color: var(--green);
    }

    .pre_r,
    .pre_r hr {
      background-color: rgba(240, 173, 78, 0.05);
      border-color: rgba(240, 173, 78, 0.4);
    }

    .pre_r h3,
    .pre_r h3 a {
      color: var(--yellow);
    }

    .pre_r h3 .badge {
      background-color: var(--yellow);
    }
  </style>
</head>

<body>
  <!-- Navigation -->
  <header class="fixed">
    <nav>
      <div>
        <a href="index.html">
          <svg xmlns="http://www.w3.org/2000/svg" fill="var(--primary)" width="44" height="46" viewbox="0 0 50 50 ">
            <path
              d="M3 41.924V38.32h60v1.79c0 .983-.018 1.96-.04 2.17-.088.864-.412 1.57-.986 2.149-.581.587-1.155.901-1.912 1.046-.236.046-4.44.053-28.669.053H3zm12.559-5.266c-3.43-.305-6.551-1.848-8.91-4.405-2.053-2.225-3.275-4.976-3.577-8.046-.061-.632-.051-2.067.02-2.72.494-4.568 3.055-8.405 7.134-10.691 1.076-.603 2.738-1.188 4.031-1.42 1.077-.191 1.156-.197 3.34-.215 2.366-.02 2.401-.016 2.96.263.239.12.38.226.613.46.355.36.524.632.656 1.053l.095.307.013 2.331.014 2.33H19.47c-1.384 0-2.638.017-2.842.038-1.14.118-1.529.194-2.157.422-2.503.91-4.218 3.036-4.584 5.683-.24 1.753.248 3.58 1.366 5.098.273.371.967 1.063 1.341 1.338a7.25 7.25 0 003.254 1.351c.428.063 1.527.062 1.924-.002 2.4-.385 4.318-1.808 5.322-3.947.31-.658.46-1.141.609-1.943.06-.334.067-1.048.087-10.49l.021-10.132.084-.272c.332-1.072 1.096-1.902 2.098-2.277.506-.189.605-.197 2.657-.215L30.585.54l-.012 11.786-.01 11.786-.083.567c-.337 2.316-1.047 4.193-2.26 5.975-2.365 3.472-6.028 5.624-10.221 6.006-.472.042-1.95.042-2.441-.002zm24.46.017a13.293 13.293 0 01-1.976-.34c-2.6-.659-4.819-2.14-6.55-4.368-.22-.285-.757-1.097-.757-1.146 0-.024 4.935-2.899 5.057-2.946.016-.006.091.09.167.215.714 1.176 2.102 2.174 3.546 2.55 1.698.44 3.402.138 4.916-.874.862-.576 1.51-1.335 1.993-2.332.265-.549.393-.915.515-1.472.122-.556.123-1.716.003-2.283-.27-1.284-.928-2.47-1.826-3.292a6.316 6.316 0 00-2.986-1.509c-.603-.12-1.638-.12-2.226.001a6.5 6.5 0 00-1.494.501c-.215.101-.404.177-.419.168-.05-.03-3.944-4.21-3.956-4.244-.006-.019 2.099-2.007 4.679-4.419 3.401-3.179 4.69-4.407 4.69-4.465v-.08l-4.707-.01-4.708-.01.01-2.915L34 .49l7.773-.01c8.49-.01 8.034-.022 8.586.203.81.329 1.465 1.081 1.703 1.959.078.284.083.4.098 2.001l.016 1.7-3.73 3.486c-2.452 2.292-3.733 3.515-3.741 3.57-.01.073.021.094.245.168.66.216 1.612.666 2.266 1.07 2.928 1.81 4.933 4.755 5.515 8.099.136.778.17 1.176.17 2.037 0 .87-.039 1.352-.17 2.113-.55 3.179-2.408 6.018-5.128 7.83-1.488.993-3.032 1.585-4.886 1.875-.386.06-.714.079-1.529.088a26.12 26.12 0 01-1.17-.004zm15.735-18.09V.472h2.015c2.172 0 2.291.009 2.85.204.827.29 1.596.984 2.017 1.822.147.294.28.794.324 1.222.026.258.04 5.672.04 16.68v16.298h-7.246z" />
          </svg>
        </a>
        <div><span></span><span></span><span></span></div>
      </div>
      <ul>
        <li><a topage="#home" class="active">
            <svg fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
            &nbsp;&nbsp;Home</a></li>

        <li><a topage="#about">
            <svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 512 512">
              <title>About</title>
              <path
                d="M256,48C141.31,48,48,141.31,48,256s93.31,208,208,208,208-93.31,208-208S370.69,48,256,48ZM205.78,164.82C218.45,151.39,236.28,144,256,144s37.39,7.44,50.11,20.94C319,178.62,325.27,197,323.79,216.76,320.83,256,290.43,288,256,288s-64.89-32-67.79-71.25C186.74,196.83,193,178.39,205.78,164.82ZM256,432a175.49,175.49,0,0,1-126-53.22,122.91,122.91,0,0,1,35.14-33.44C190.63,329,222.89,320,256,320s65.37,9,90.83,25.34A122.87,122.87,0,0,1,382,378.78,175.45,175.45,0,0,1,256,432Z" />
            </svg>
            &nbsp;&nbsp;About Me</a>
        </li>
      </ul>
      <ul class="inline">
        <li>
          <a class="bmc" target="_blank" href="https://www.buymeacoffee.com/dOWS9cU">
            <svg role="img" id="bmac-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <title>Buy Me A Coffee icon</title>
              <path
                d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-1.001-1.379-.197-.069-.42-.098-.57-.241-.152-.143-.196-.366-.231-.572-.065-.378-.125-.756-.192-1.133-.057-.325-.102-.69-.25-.987-.195-.4-.597-.634-.996-.788a5.723 5.723 0 00-.626-.194c-1-.263-2.05-.36-3.077-.416a25.834 25.834 0 00-3.7.062c-.915.083-1.88.184-2.75.5-.318.116-.646.256-.888.501-.297.302-.393.77-.177 1.146.154.267.415.456.692.58.36.162.737.284 1.123.366 1.075.238 2.189.331 3.287.37 1.218.05 2.437.01 3.65-.118.299-.033.598-.073.896-.119.352-.054.578-.513.474-.834-.124-.383-.457-.531-.834-.473-.466.074-.96.108-1.382.146-1.177.08-2.358.082-3.536.006a22.228 22.228 0 01-1.157-.107c-.086-.01-.18-.025-.258-.036-.243-.036-.484-.08-.724-.13-.111-.027-.111-.185 0-.212h.005c.277-.06.557-.108.838-.147h.002c.131-.009.263-.032.394-.048a25.076 25.076 0 013.426-.12c.674.019 1.347.067 2.017.144l.228.031c.267.04.533.088.798.145.392.085.895.113 1.07.542.055.137.08.288.111.431l.319 1.484a.237.237 0 01-.199.284h-.003c-.037.006-.075.01-.112.015a36.704 36.704 0 01-4.743.295 37.059 37.059 0 01-4.699-.304c-.14-.017-.293-.042-.417-.06-.326-.048-.649-.108-.973-.161-.393-.065-.768-.032-1.123.161-.29.16-.527.404-.675.701-.154.316-.199.66-.267 1-.069.34-.176.707-.135 1.056.087.753.613 1.365 1.37 1.502a39.69 39.69 0 0011.343.376.483.483 0 01.535.53l-.071.697-1.018 9.907c-.041.41-.047.832-.125 1.237-.122.637-.553 1.028-1.182 1.171-.577.131-1.165.2-1.756.205-.656.004-1.31-.025-1.966-.022-.699.004-1.556-.06-2.095-.58-.475-.458-.54-1.174-.605-1.793l-.731-7.013-.322-3.094c-.037-.351-.286-.695-.678-.678-.336.015-.718.3-.678.679l.228 2.185.949 9.112c.147 1.344 1.174 2.068 2.446 2.272.742.12 1.503.144 2.257.156.966.016 1.942.053 2.892-.122 1.408-.258 2.465-1.198 2.616-2.657.34-3.332.683-6.663 1.024-9.995l.215-2.087a.484.484 0 01.39-.426c.402-.078.787-.212 1.074-.518.455-.488.546-1.124.385-1.766zm-1.478.772c-.145.137-.363.201-.578.233-2.416.359-4.866.54-7.308.46-1.748-.06-3.477-.254-5.207-.498-.17-.024-.353-.055-.47-.18-.22-.236-.111-.71-.054-.995.052-.26.152-.609.463-.646.484-.057 1.046.148 1.526.22.577.088 1.156.159 1.737.212 2.48.226 5.002.19 7.472-.14.45-.06.899-.13 1.345-.21.399-.072.84-.206 1.08.206.166.281.188.657.162.974a.544.544 0 01-.169.364zm-6.159 3.9c-.862.37-1.84.788-3.109.788a5.884 5.884 0 01-1.569-.217l.877 9.004c.065.78.717 1.38 1.5 1.38 0 0 1.243.065 1.658.065.447 0 1.786-.065 1.786-.065.783 0 1.434-.6 1.499-1.38l.94-9.95a3.996 3.996 0 00-1.322-.238c-.826 0-1.491.284-2.26.613z" />
            </svg></a>
        </li>
        <li>
          <a href="https://github.com/d3ward">
            <svg xmlns="http://www.w3.org/2000/svg" role="img" viewBox="0 0 24 24"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
          </a>
        </li>
        <li>
          <div id="theme-toggle">
            <span class="light-icon theme-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <title>Dark Theme</title>
                <path
                  d="M264,480A232,232,0,0,1,32,248C32,154,86,69.72,169.61,33.33a16,16,0,0,1,21.06,21.06C181.07,76.43,176,104.66,176,136c0,110.28,89.72,200,200,200,31.34,0,59.57-5.07,81.61-14.67a16,16,0,0,1,21.06,21.06C442.28,426,358,480,264,480Z" />
              </svg>
            </span>
            <span class="dark-icon theme-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <title>Light Theme</title>
                <path d="M256,118a22,22,0,0,1-22-22V48a22,22,0,0,1,44,0V96A22,22,0,0,1,256,118Z" />
                <path d="M256,486a22,22,0,0,1-22-22V416a22,22,0,0,1,44,0v48A22,22,0,0,1,256,486Z" />
                <path
                  d="M369.14,164.86a22,22,0,0,1-15.56-37.55l33.94-33.94a22,22,0,0,1,31.11,31.11l-33.94,33.94A21.93,21.93,0,0,1,369.14,164.86Z" />
                <path
                  d="M108.92,425.08a22,22,0,0,1-15.55-37.56l33.94-33.94a22,22,0,1,1,31.11,31.11l-33.94,33.94A21.94,21.94,0,0,1,108.92,425.08Z" />
                <path d="M464,278H416a22,22,0,0,1,0-44h48a22,22,0,0,1,0,44Z" />
                <path d="M96,278H48a22,22,0,0,1,0-44H96a22,22,0,0,1,0,44Z" />
                <path
                  d="M403.08,425.08a21.94,21.94,0,0,1-15.56-6.45l-33.94-33.94a22,22,0,0,1,31.11-31.11l33.94,33.94a22,22,0,0,1-15.55,37.56Z" />
                <path
                  d="M142.86,164.86a21.89,21.89,0,0,1-15.55-6.44L93.37,124.48a22,22,0,0,1,31.11-31.11l33.94,33.94a22,22,0,0,1-15.56,37.55Z" />
                <path d="M256,358A102,102,0,1,1,358,256,102.12,102.12,0,0,1,256,358Z" />
              </svg>
            </span>
          </div>
        </li>
      </ul>
    </nav>
  </header>
  <svg viewBox="0 0 120 30" class="wave" preserveaspectratio="none">
    <path d="M0 9v6c30 0 30 4 60 4 31 0 30-4 60-4s30 4 60 4 30-4 60-4V0H0z"></path>
  </svg>
  <main>
    <div id="stats"></div>
  </main>

  <a class="gt-link hide" href="" id="gt-link">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6">
      <path d="M12 6H0l6-6z" /></svg>
  </a>
  <svg viewBox="0 0 120 12" class="wave" style="margin-bottom:-7px;margin-top:2rem;height:5em;"
    preserveaspectratio="none">
    <path d="M 0 0 C 30 0 30 5 60 5 C 90 5 90 0 120 0 C 150 0 150 5 180 5 C 210 5 210 0 240 0 v 12 h -240 z" />
  </svg>
  <footer class="_bg-primary _cl-black">
    <div class="cnt">
      <div class="_f-center">
        <div><a href="https://github.com/d3ward" class="btn"> <svg viewBox="0 0 20 20">
              <use xlink:href="#github-icon"></use>
            </svg>&nbsp;Github </a></div>
        <div><a class="btn" href="https://www.buymeacoffee.com/dOWS9cU"> <svg viewBox="0 0 20 20">
              <use xlink:href="#bmac-icon"></use>
            </svg>&nbsp;BuyMeACoffee</a></div>
      </div><small>
        <h6>Designed by Eduard Ursu(@d3ward) Â© 2021</h6>
      </small>
    </div>
  </footer>
</body>
<script>
  var d3ss = {
    //Open and close the navbar , on default button ofr navbar or using the toggle parameter
    navbar: function (toggle) {
      var n = document.querySelector("nav");
      if (n) {
        const toggleActive = function () {
          n.classList.toggle("opened");
        };
        var oc = (toggle) ? toggle : "nav>div>div";
        document.querySelector(oc).addEventListener("click", toggleActive);
      }
    },
    theme: function () {
      //Theme Switcher
      var toggle = document.getElementById("theme-toggle");
      if (window.CSS && CSS.supports("color", "var(--bg)") && toggle) {
        var storedTheme = localStorage.getItem('theme') || (window.matchMedia(
            "(prefers-color-scheme: dark)").matches ?
          "dark" : "light");
        if (storedTheme)
          document.documentElement.setAttribute('data-theme', storedTheme)
        toggle.onclick = function () {
          var currentTheme = document.documentElement.getAttribute("data-theme");
          var targetTheme = "light";

          if (currentTheme === "light") {
            targetTheme = "dark";
          }

          document.documentElement.setAttribute('data-theme', targetTheme)
          localStorage.setItem('theme', targetTheme);
        };
      }
    },
    gotop: function () {
      const gt_btn = document.getElementById('gt-link');
      if (gt_btn) {
        // Let's set up a function that shows our scroll-to-top button if we scroll beyond the height of the initial window.
        window.addEventListener("scroll", () => {
          let y = window.scrollY;
          if (y > 0) {
            gt_btn.className = "gt-link show";
          } else {
            gt_btn.className = "gt-link hide";
          }
        });
        gt_btn.onclick = function (e) {
          e.preventDefault();
          if (document.documentElement.scrollTop || document.body.scrollTop > 0) {
            window.scroll({
              top: 0,
              left: 0,
              behavior: 'smooth'
            });
          }
        }
      }
    }
  }
  document.addEventListener("DOMContentLoaded", () => {
    d3ss.navbar();
    d3ss.theme();
    d3ss.gotop();
  })

  function formatNumber(value) {
    return value.toString().replace(/(\d)(?=(\d{3})+$)/g, '$1,')
  }

  function showStats(data) {
    var err = false;
    var errMessage = '';
    if (data.status == 404) {
      err = true;
      errMessage = "The project does not exist!";
    }
    if (data.status == 403) {
      err = true;
      errMessage = "You've exceeded GitHub's rate limiting.<br />Please try again in about an hour.";
    }
    if (data.length == 0) {
      err = true;
      errMessage = "There are no releases for this project";
    }
    var html = "";
    if (err) {
      html += "<div>" + errMessage + "</div>";
    } else {
      html += "<div>";
      var isLatestRelease = true;
      var totalDownloadCount = 0;
      var releaseName = data[0].name;
      data.forEach(item => {
        var releaseTag = item.tag_name;
        var releaseBadge = "";
        var releaseClassNames = "release";
        var releaseURL = item.html_url;
        var isPreRelease = item.prerelease;
        var releaseAssets = item.assets;
        var releaseDownloadCount = 0;
        var publishDate = item.published_at.split("T")[0];
        if (isPreRelease) {
          releaseBadge = "&nbsp;&nbsp;<span class='badge'>Pre-release</span>";
          releaseClassNames += " pre_r";
        } else if (isLatestRelease) {
          releaseBadge = "&nbsp;&nbsp;<span class='badge'>Latest release</span>";
          releaseClassNames += " lat_r";
          isLatestRelease = false;
        }
        html += "<div class='" + releaseClassNames + "'>";
        html += "<h3><a href='" + releaseURL + "' target='_blank'>" + releaseTag + "</a>" + releaseBadge + "</h3>" +
          "<hr>";
        html += "<ul>";
        html += "<li>&nbsp;Published: " + publishDate + "</li>";
        if (releaseAssets.length) {
          releaseAssets.forEach(asset => {
            var assetSize = (asset.size / 1048576.0).toFixed(2);
            var lastUpdate = asset.updated_at.split("T")[0];
            html += "<li>&nbsp;" + asset.name + " ( " + assetSize +
              "&nbsp;MiB ) - " +
              "downloaded " + formatNumber(asset.download_count) + "&nbsp;times. " +
              "Last&nbsp;updated&nbsp;on&nbsp;" + lastUpdate + "</li>";
            totalDownloadCount += asset.download_count;
            releaseDownloadCount += asset.download_count;
          });
        }
        html += "</ul>";
        html += "</div>";
      });
      if (totalDownloadCount) {
        var totalHTML = "<div class='p_title'>";
        totalHTML += "<h3>" + releaseName + "<span> ( " + formatNumber(totalDownloadCount) + " ) </span></h3>";

        totalHTML += "</div>";
        html = totalHTML + html;
      }
      html += "</div>";
    }
    var resultDiv = document.getElementById("stats");
    var div = document.createElement("div");
    div.innerHTML = html;
    resultDiv.appendChild(div);
  }

  function getStats(repository) {
    var url = "https://api.github.com/repos/d3ward/" + repository + "/releases";
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.open('GET', url, true);
    xmlhttp.onreadystatechange = function () {
      if (xmlhttp.readyState == 4) {
        if (xmlhttp.status == 200) {
          var obj = JSON.parse(xmlhttp.responseText);
          showStats(obj);
        }
      }
    };
    xmlhttp.send(null);
  }
  var repos = ["mti", "floatly", "bouncydvd", "b2ntp"];
  repos.forEach(r => {
    getStats(r);
  });
</script>

</html>