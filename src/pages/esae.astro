---
import Layout from "@layouts/Layout.astro";
import ItemCard from "@components/esae/ItemCard.astro";
import { Icon } from "astro-icon/components";
import esaeData from "@data/esae.json";
import extensionsData from "@data/extensions.json";

const seo = {
    title: "d3ward - ESAE",
    description:
        "Explore my carefully curated selection of tools that power my digital life every day. Essential Services, Apps & Extensions Collection.",
    url: "https://d3ward.github.io/esae",
};

// Flatten all apps into a single array with groups
const allApps = [
    ...esaeData.apps.cross.map((app) => ({
        ...app,
        groups: "app cross desktop",
    })),
    ...esaeData.apps.macOS.map((app) => ({
        ...app,
        groups: "app macos desktop",
    })),
    ...esaeData.apps.windows.map((app) => ({
        ...app,
        groups: "app windows desktop",
    })),
    ...esaeData.apps.mobile.map((app) => ({ ...app, groups: "app mobile" })),
];

// Add groups to services
const allServices = esaeData.services.map((service) => ({
    ...service,
    groups: "service",
}));

// Add groups to extensions
const allExtensions = extensionsData.extensions.map((ext) => ({
    ...ext,
    groups: "extension",
}));

// Combine all items
const allItems = [...allApps, ...allServices, ...allExtensions];
---

<Layout seo={seo}>
    <!-- Hero Section -->
    <section class="bg-base-200 py-20">
        <div class="container mx-auto max-w-screen-lg px-4">
            <div class="text-center space-y-6">
                <h1 class="text-4xl md:text-5xl font-bold">
                    Essential Services, Apps & Extensions
                </h1>
                <div
                    class="max-w-3xl mx-auto text-base-content/80 leading-relaxed space-y-4"
                >
                    <p>
                        Welcome to my carefully curated selection of tools that
                        power my digital life every day.
                    </p>
                    <p>
                        From enhancing productivity to bolstering online
                        security, these recommendations reflect my personal
                        journey in optimizing how I work and interact online.
                        Whether you're seeking reliable VPN services, powerful
                        productivity apps, or handy browser extensions, each
                        recommendation is chosen for its functionality,
                        reliability, and ability to streamline your digital
                        experience.
                    </p>
                    <p>
                        Discover tools that I rely on across different platforms
                        — from desktops to mobile devices — to stay productive,
                        secure, and organized.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Filter Section -->
    <section class="container mx-auto max-w-screen-lg px-4 py-12">
        <div class="flex flex-wrap gap-3 justify-center mb-12">
            <button data-group="all" class="btn btn-sm btn-primary gap-2">
                <Icon name="tabler:layout-grid" class="w-4 h-4" />
                All
            </button>
            <button data-group="app" class="btn btn-sm btn-ghost gap-2">
                <Icon name="tabler:apps" class="w-4 h-4" />
                Apps
            </button>
            <button data-group="extension" class="btn btn-sm btn-ghost gap-2">
                <Icon name="tabler:puzzle" class="w-4 h-4" />
                Extensions
            </button>
            <button data-group="service" class="btn btn-sm btn-ghost gap-2">
                <Icon name="tabler:cloud" class="w-4 h-4" />
                Services
            </button>
            <button data-group="desktop" class="btn btn-sm btn-ghost gap-2">
                <Icon name="tabler:device-desktop" class="w-4 h-4" />
                Desktop
            </button>
            <button data-group="mobile" class="btn btn-sm btn-ghost gap-2">
                <Icon name="tabler:device-mobile" class="w-4 h-4" />
                Mobile
            </button>
            <button data-group="macos" class="btn btn-sm btn-ghost gap-2">
                <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M17.05 20.28c-.98.95-2.05.8-3.08.35-1.09-.46-2.09-.48-3.24 0-1.44.62-2.2.44-3.06-.35C2.79 15.25 3.51 7.59 9.05 7.31c1.35.07 2.29.74 3.08.8 1.18-.24 2.31-.93 3.57-.84 1.51.12 2.65.72 3.4 1.8-3.12 1.87-2.38 5.98.48 7.13-.57 1.5-1.31 2.99-2.54 4.09l.01-.01zM12.03 7.25c-.15-2.23 1.66-4.07 3.74-4.25.29 2.58-2.34 4.5-3.74 4.25z"
                    ></path>
                </svg>
                macOS
            </button>
            <button data-group="windows" class="btn btn-sm btn-ghost gap-2">
                <Icon name="simple-icons:windows" class="w-4 h-4" />
                Windows
            </button>
        </div>

        <!-- Items Grid -->
        <div class="grid grid-cols-12 gap-6">
            {
                allItems.map((item) => (
                    <ItemCard
                        name={item.name}
                        description={item.description}
                        url={item.url}
                        platforms={item.platforms || item.platform || []}
                        tags={item.tags}
                        groups={item.groups}
                    />
                ))
            }
        </div>
    </section>

    <script>
        import { initFilter } from "@scripts/filter";
        initFilter();

        // Style active button
        document.addEventListener("DOMContentLoaded", () => {
            const filterButtons = document.querySelectorAll("[data-group]");
            filterButtons.forEach((button) => {
                button.addEventListener("click", () => {
                    filterButtons.forEach((btn) => {
                        btn.classList.remove("btn-primary");
                        btn.classList.add("btn-ghost");
                    });
                    button.classList.remove("btn-ghost");
                    button.classList.add("btn-primary");
                });
            });
        });
    </script>
</Layout>
